// ===========================================================================//	LFocusBox.cp					©1993 Metrowerks Inc. All rights reserved.// ===========================================================================////	A FocusBox outlines a Pane to indicate that Pane is the current focus//	for keystrokes.#ifdef PowerPlant_PCH#include PowerPlant_PCH#endif#include <LFocusBox.h>#include <UDrawingState.h>#include <LView.h>// ---------------------------------------------------------------------------//		¥ LFocusBox// ---------------------------------------------------------------------------//	Default ConstructorLFocusBox::LFocusBox(){	Disable();}// ---------------------------------------------------------------------------//		¥ LFocusBox// ---------------------------------------------------------------------------//	Copy ConstructorLFocusBox::LFocusBox(	const LFocusBox	&inOriginal)		: LPane(inOriginal){}// ---------------------------------------------------------------------------//		¥ LFocusBox// ---------------------------------------------------------------------------//	Construct a FocusBox from the data in a StreamLFocusBox::LFocusBox(	LStream	*inStream)		: LPane(inStream){}// ---------------------------------------------------------------------------//		¥ AttachPane// ---------------------------------------------------------------------------//	Associate a host Pane with a FocusBox, sizing and positioning the//	FocusBox so that it fits around the PanevoidLFocusBox::AttachPane(	LPane	*inPane){									// FocusBox has the same SuperView									//   as its host Pane	LView	*superView = inPane->GetSuperView();	PutInside(superView);		SDimension16	hostSize;		// Size FocusBox to surround its host	inPane->GetFrameSize(hostSize);	ResizeFrameTo(hostSize.width + 6, hostSize.height + 6, false);										// Locate FocusBox relative to its host	SPoint32	hostLocation;		//   Host location in Port coords	inPane->GetFrameLocation(hostLocation);		SPoint32	imageLoc = {0, 0};	// Get Super Image location	if (superView != nil) {		superView->GetImageLocation(imageLoc);	}										// Specify location of FocusBox									// in Image coords of its SuperView	PlaceInSuperImageAt(hostLocation.h - imageLoc.h - 3,						hostLocation.v - imageLoc.v - 3, false);										// Use same FrameBinding as host	inPane->GetFrameBinding(mFrameBinding);}// ---------------------------------------------------------------------------//		¥ DrawSelf// ---------------------------------------------------------------------------//	Draw a FocusBoxvoidLFocusBox::DrawSelf(){	Rect	frame;	if (CalcLocalFrameRect(frame)) {		StColorPenState::Normalize();		::PenSize(2, 2);		::FrameRect(&frame);	}}voidLFocusBox::ShowSelf(){	Draw(nil);}voidLFocusBox::HideSelf(){	Rect	frame;	FocusDraw();	if (CalcLocalFrameRect(frame)) {		RgnHandle	outerRgn = ::NewRgn();		::RectRgn(outerRgn, &frame);				RgnHandle	innerRgn = ::NewRgn();		::InsetRect(&frame, 2, 2);		::RectRgn(innerRgn, &frame);				::DiffRgn(outerRgn, innerRgn, outerRgn);		::DisposeRgn(innerRgn);				::EraseRgn(outerRgn);		::DisposeRgn(outerRgn);	}}