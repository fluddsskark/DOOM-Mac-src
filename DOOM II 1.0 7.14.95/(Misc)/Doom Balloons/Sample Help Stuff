// Help manager available?	gHasHelpManager = FALSE;	err = Gestalt( gestaltHelpMgrAttr, &gestaltResult );				// Is the Help manager here?	if ( err == noErr )	{		if ( gestaltResult & ( 1 << gestaltHelpMgrPresent ) )			gHasHelpManager = TRUE;	}// OK, in I_FinishUpdate	if ( gHasHelpManager )				// Is the Help Manager present?	{		if ( HMGetBalloons() )			// Is Balloon Help turned on?		{			// Use Copybits		}	}// If you need to get rid of a balloon		if ( gHasHelpManager )				// Is the Help Manager present?			if ( HMGetBalloons() )			// Is Balloon Help turned on?				if ( HMIsBalloon() )			// Is there a balloon showing?					HMRemoveBalloon();			// Get rid of the balloon.// Showing balloons	// Make sure port == gDoomWindow	if ( gHasHelpManager )		// Is the Help Manager present?	{		if ( HMGetBalloons() )	// Is Balloon Help turned on?		{			localMousePos = theEvent->where;			GlobalToLocal( &localMousePos );			aHelpMsg.hmmHelpType = khmmStringRes;						inRect = FALSE;			for ( index = 0; index < kMainMenuBalloons; index++ )			{				if ( PtInRect( localMousePos, &pBalloonRects[ index ] ) )				{					if ( pLastBalloon != index )					{						globalRect = pBalloonRects[ index ];						LocalToGlobal( &( m_BotRight( globalRect ) ) );						LocalToGlobal( &( m_TopLeft( globalRect ) ) );												globalTip.h = globalRect.left + 10;						globalTip.v = globalRect.bottom - 10;												// STR# resource id & index												aHelpMsg.u.hmmStringRes.hmmResID = kMainMenuHelp_Str_ResID;						aHelpMsg.u.hmmStringRes.hmmIndex = index + 1;												err = HMShowBalloon( &aHelpMsg, globalTip, &globalRect,															nil, 0, 3, kHMRegularWindow );						if ( err == hmBalloonAborted )							err = noErr;						m_CheckError( "Showing the main menu help balloons." );												pLastBalloon = index;					}					inRect = TRUE;					break;				}			}			if ( !inRect or !HMIsBalloon() )				pLastBalloon = -1;		}	}