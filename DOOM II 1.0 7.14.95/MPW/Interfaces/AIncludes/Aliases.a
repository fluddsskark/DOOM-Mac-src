;;	File:		Aliases.a;;	Copyright:	© 1984-1994 by Apple Computer, Inc.;				All rights reserved.;;	Version:	Universal Interfaces 2.0a3  ETO #16, MPW prerelease.  Friday, November 11, 1994. ;;	Bugs?:		If you find a problem with this file, send the file and version;				information (from above) and the problem description to:;;					Internet:	apple.bugs@applelink.apple.com;					AppleLink:	APPLE.BUGS;;	IF &TYPE('__ALIASES__') = 'UNDEFINED' THEN__ALIASES__ SET 1	IF &TYPE('__TYPES__') = 'UNDEFINED' THEN	include 'Types.a'	ENDIF;		include 'ConditionalMacros.a'								;	IF &TYPE('__APPLETALK__') = 'UNDEFINED' THEN	include 'AppleTalk.a'	ENDIF;		include 'OSUtils.a'										;;			include 'MixedMode.a'									;;			include 'Memory.a'										;	IF &TYPE('__FILES__') = 'UNDEFINED' THEN	include 'Files.a'	ENDIFrAliasType						EQU		'alis'				; Aliases are stored as resources of this type ; define alias resolution action rules mask kARMMountVol					EQU		$00000001			; mount the volume automatically kARMNoUI						EQU		$00000002			; no user interface allowed during resolution kARMMultVols					EQU		$00000008			; search on multiple volumes kARMSearch						EQU		$00000100			; search quickly kARMSearchMore					EQU		$00000200			; search further kARMSearchRelFirst				EQU		$00000400			; search target on a relative path first ; define alias record information types asiZoneName						EQU		-3					; get zone name asiServerName					EQU		-2					; get server name asiVolumeName					EQU		-1					; get volume name asiAliasName					EQU		0					; get aliased file/folder/volume name asiParentName					EQU		1					; get parent folder name ; define the alias record that will be the blackbox for the caller AliasRecord 			RECORD	0userType				 ds.l	1									; appl stored type like creator type aliasSize				 ds.w	1									; alias record size in bytes, for appl usage sizeof					 EQU	6						ENDR; alias record information type 	IF GENERATING68K THEN		Macro		_NewAlias			moveq	#2,d0			dc.w 	$A823		EndM	ELSE		IMPORT	NewAlias	ENDIF; create a minimal new alias for a target and return alias record handle 	IF GENERATING68K THEN		Macro		_NewAliasMinimal			moveq	#8,d0			dc.w 	$A823		EndM	ELSE		IMPORT	NewAliasMinimal	ENDIF; create a minimal new alias from a target fullpath (optional zone and server name) and return alias record handle  	IF GENERATING68K THEN		Macro		_NewAliasMinimalFromFullPath			moveq	#9,d0			dc.w 	$A823		EndM	ELSE		IMPORT	NewAliasMinimalFromFullPath	ENDIF; given an alias handle and fromFile, resolve the alias, update the alias record and return aliased filename and wasChanged flag. 	IF GENERATING68K THEN		Macro		_ResolveAlias			moveq	#3,d0			dc.w 	$A823		EndM	ELSE		IMPORT	ResolveAlias	ENDIF; given an alias handle and an index specifying requested alias information type, return the information from alias record as a string. 	IF GENERATING68K THEN		Macro		_GetAliasInfo			moveq	#7,d0			dc.w 	$A823		EndM	ELSE		IMPORT	GetAliasInfo	ENDIF; ;  Given a file spec, return target file spec if input file spec is an alias.;  It resolves the entire alias chain or one step of the chain.  It returns;  info about whether the target is a folder or file; and whether the input;  file spec was an alias or not. ;	IF GENERATING68K THEN		Macro		_ResolveAliasFile			moveq	#12,d0			dc.w 	$A823		EndM	ELSE		IMPORT	ResolveAliasFile	ENDIF	IF GENERATING68K THEN		Macro		_FollowFinderAlias			moveq	#15,d0			dc.w 	$A823		EndM	ELSE		IMPORT	FollowFinderAlias	ENDIF; ;   Low Level Routines ; Given an alias handle and fromFile, match the alias and return aliased filename(s) and needsUpdate flag;	IF GENERATING68K THEN		Macro		_MatchAlias			moveq	#5,d0			dc.w 	$A823		EndM	ELSE		IMPORT	MatchAlias	ENDIF; given a fromFile-target pair and an alias handle, update the lias record pointed to by alias handle to represent target as the new alias. 	IF GENERATING68K THEN		Macro		_UpdateAlias			moveq	#6,d0			dc.w 	$A823		EndM	ELSE		IMPORT	UpdateAlias	ENDIF	ENDIF ; __ALIASES__