#define global#ifndef __MPW_VERSION__	#if defined(powerc) || defined(__powerc)		/* Pre-compiled Mac header */		#include <DGMacHeadersPPC>	#else		#include <DGMacHeaders68K>	#endif		#if __profile__		#include "profiler.h"	#endif#else	#include <AppleEvents.h>	#include <GestaltEqu.h>	#include <LowMem.h>	#include <Menus.h>	#include <Movies.h>	#include <Palettes.h>	#include <QuickDraw.h>	#include <Sound.h>	#include <StandardFile.h>	#include <Windows.h>#endif#include "LionDoom.h"#include <Lion.h>#include <ctype.h>#include "DoomResources.h"#include "doomdef.h"#include "ST_STUFF.PROTO.H"#include "HU_STUFF.H"/* * *	External Functions. * */ extern Boolean CheckForBail (void);extern void HideMenuBar (void);/* * *	External Globals. * */extern int						gDoomMoveConfig;extern char						*gScanCodeStr[256];extern Boolean				gOneTimeFullUpdate;extern WindowPtr			gDoomWindow;extern int            gametic;extern int						gameepisode;extern int						gActionKeyScanCode;extern int						gFireKeyScanCode;extern int						gFastKey;extern int						gStrafeKey;	/* * *	Prototypes. * */  void HelpScreen (void);#define		kMaxHelpStrs		38typedef struct {	char			*helpStr;	int				xPos;	int				yPos;} tHelpStr;tHelpStr			gHelpStrs[kMaxHelpStrs] = {	{ "* SEE MENUS FOR OTHER SHORTCUTS *", 42, 2},	{ "ESC KEY=MENU",3, 14 },	{ "TAB=MAP", 248, 14 },	{ "FUNCTION KEYS", 2, 26 },	{ "F2=SAVE", 3, 34 },	{ "F3=LOAD", 104, 34 },	{ "F4=SOUND VOL", 212, 34 },	{ "F5=DETAIL", 3, 42 },	{ "F6=QUICKSAVE", 104, 42 },	{ "F7=END GAME", 212, 42 },	{ "F8=MESSAGES", 3, 50 },	{ "F9=QUICKLOAD", 104, 50 },	{ "F10=QUIT", 212, 50 },	{ "-=REDUCE VIEW", 3, 58 },	{ "+=INCREASE VIEW", 104, 58 },	{ "F11=GAMMA FIX", 212, 58 },	{ "AUTOMAP FUNCTIONS", 2, 71 },	{ "F=FOLLOW MODE", 9, 79 },	{ "M=MARK PLACE", 115, 79 },	{ "C=CLEAR MARKS", 216, 79 },	{ "+=ZOOM IN", 9, 87 },	{ "-=ZOOM OUT", 118, 87 },	{ "O=FULL/ZOOM", 216, 87 },	{ "WEAPONS", 2, 100 },	{ "1=FIST", 7, 108 },	{ "2=PISTOL", 111, 108 },	{ "3=SHOTGUNS", 201, 108 },	{ "4=CHAINGUN", 5, 116 },	{ "5=ROCKET", 111, 116 },	{ "6=PLASMA RIFLE", 201, 116 },	{ "7=BFG 9000", 6, 124 },	{ "MOVEMENT", 3, 137 },	{ "FORWARD/BACKWARD", 5, 145 },	{ "TURN LEFT/RIGHT", 5, 153 },	{ "STRAFE", 5, 161 },	{ "RUN", 5, 174 },	{ "FIRING", 5, 182 },	// {	"MOUSE BTN, ", 140, 177 },	{ "OPEN", 5, 190 }};void HelpScreen (void){  int							i, prevRes;  void						*bg;  Boolean					bailed = FALSE;  Rect						r;  GrafPtr					oldPort;  void						*myTemp;  char						mystr[200];		HiliteMenu(0);	GetPort(&oldPort);	SetPort(gDoomWindow);	r = gDoomWindow->portRect;	r.bottom = LMGetMBarHeight();	HideMenuBar();	PaintRect(&r);		myTemp = screens[0];	screens[0] = screens[2];		// Draw everything here!		// Treat as 320x200	prevRes = gHiRes;	gHiRes = 0;					// Low Res		// Draw brown background.	if (commercial)		bg = W_CacheLumpName("INTERPIC", PU_CACHE);    // background	else	{		char		bgname[30];				sprintf(bgname, "WIMAP%d", gameepisode - 1);		bg = W_CacheLumpName(bgname, PU_CACHE);    // background	}	V_DrawPatchLRes(0, 0, 0, bg);		for (i = 0; i < kMaxHelpStrs; i++)		M_DrawText(gHelpStrs[i].xPos, gHelpStrs[i].yPos, false, gHelpStrs[i].helpStr);		switch (gDoomMoveConfig)	{		case 1 :		// Main Keyboard			M_DrawText(140, 145, false, "I and K");			M_DrawText(140, 153, false, "J and L");			M_DrawText(140, 161, false, "U and O");			break;					case 2 :		// Numeric Keypad			M_DrawText(140, 145, false, "8 and 5");			M_DrawText(140, 153, false, "4 and 6");			M_DrawText(140, 161, false, "7 and 9");			break;					case 3 :		// Arrow keys			M_DrawText(140, 145, false, "Up/Down Arrow");			M_DrawText(140, 153, false, "Left/Right Arrow");			strcpy(mystr, gScanCodeStr[ gStrafeKey ]);			strcat(mystr, "+Left/Right Arrow");			M_DrawText(140, 161, false, mystr);			break;	}	// Open	M_DrawText(140, 190, false, gScanCodeStr[ gActionKeyScanCode ]);	// Fire	M_DrawText(140, 182, false, "Mouse Btn, ");	M_DrawText(216, 182, false, gScanCodeStr[ gFireKeyScanCode ]);	// Run	M_DrawText(140, 174, false, gScanCodeStr[ gFastKey ]);	HideCursor();	gOneTimeFullUpdate = 1;	I_FinishUpdate();		FlushEvents(keyDownMask | keyUpMask | mDownMask | mUpMask | autoKeyMask, 0);	while (TRUE)	{		S_ServiceMusic();		if (!bailed)		{			gOneTimeFullUpdate = 1;			I_FinishUpdate();		}				if (CheckForBail())		{			bailed = TRUE;			break;		}	}		ShowCursor();		// Restore offscreen.	screens[0] = myTemp;	gHiRes = prevRes;		gOneTimeFullUpdate = 1;	SetPort(oldPort);	FlushEvents( keyDownMask | keyUpMask | mDownMask | mUpMask | autoKeyMask, 0);}