#ifndef __MPW_VERSION__	#if defined(powerc) || defined (__powerc)		/* Pre-compiled Mac header */		#include <DGMacHeadersPPC>	#else		#include <DGMacHeaders68K>	#endif#else	#include <Memory.h>#endif#include "LionDoom.h"#include <Lion.h>#include "DoomResources.h"#include "MacAllocA.proto.h"tUByte		*gAllocAMem;tULong		gAllocAMemSize;tUWord		gAllocAIndex;tLong			*gAllocAOffsets;tLong			gAllocACurrOffset;Boolean InitAllocA (tLong initialStackSize){	gAllocAMem = (tUByte *) NewPtr( initialStackSize );	if (gAllocAMem == NULL)		return FALSE;		// Allow room for 128 simultaneous alloca frames		gAllocAOffsets = (tLong *) NewPtr( 128L * sizeof(tLong) );	if (gAllocAOffsets == NULL)	{#if __LION_DEBUG		ParamText("\pError: InitAllocA failed.", "\p", "\p", "\p");		(void) Alert(rAlertErrGeneral, NULL);#endif		DisposePtr((Ptr) gAllocAMem);		gAllocAMem = NULL;		return FALSE;	}		gAllocAMemSize = initialStackSize;	gAllocAIndex = 0;	gAllocAOffsets[0] = initialStackSize;	gAllocACurrOffset = initialStackSize;		return TRUE;}void PushRoutineAllocA (void){	gAllocAIndex++;	gAllocAOffsets[ gAllocAIndex ] = gAllocACurrOffset;}void PopRoutineAllocA (void){	gAllocACurrOffset = gAllocAOffsets[ gAllocAIndex ];	gAllocAIndex--;}void *alloca (tLong sizeNeeded){	gAllocACurrOffset -= sizeNeeded;		if ( gAllocACurrOffset < 0 )	{		gAllocACurrOffset += sizeNeeded;		ParamText("\pError: alloca failed.", "\p", "\p", "\p");		(void) Alert(rAlertErrGeneral, NULL);		return NULL;	}	else		return (void *) (gAllocAMem + gAllocACurrOffset);}